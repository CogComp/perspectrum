{% load static %}
{% load claim_filter %}

<!DOCTYPE html>
<html lang="en">
<script src="https://code.jquery.com/jquery-3.3.1.min.js"
        integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js"
        integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh"
        crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js"
        integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ"
        crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css"
      integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flat-ui/2.3.0/css/flat-ui.min.css"
      integrity="sha256-7bYJaNviFZlH+bKqZlshmYKeyvkp+fXBQuerWp2AXlA=" crossorigin="anonymous"/>
<link rel="stylesheet" href="{% static "css/style.css" %}">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Perspective Annotation Interface</title>
<script src="{% static "js/persp.js" %}"></script>
</head>
<body>
<div class="container-fluid">
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo03"
                aria-controls="navbarTogglerDemo03" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <a class="navbar-brand" href="#">Menu</a>

        <div class="collapse navbar-collapse" id="navbarTogglerDemo03">

            <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
                <li class="nav-item">
                    <a class="nav-link" href="#">Unify the claims</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                       data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Add perspective to the other claim
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <div class="form-inline my-2 my-lg-0">
                            <input id='sbs-add-cid-from' class="form-control mr-sm-2" type="search" placeholder="From Claim ID" aria-label="Search">
                            <input id='sbs-add-pid' class="form-control mr-sm-2" type="search" placeholder="Perspective ID" aria-label="Search">
                            <input id='sbs-add-cid-to' class="form-control mr-sm-2" type="search" placeholder="To Claim ID" aria-label="Search">
                        </div>
                        <input id='sbs-add-flip-stance' type="checkbox"> Flip Stance??<br>
                        <button id='sbs-add' class="btn btn-outline-danger my-2 my-sm-0" type="submit">Add</button>
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                       data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Delete perspective
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <div class="form-inline my-2 my-lg-0">
                            <input id='sbs-del-cid' class="form-control mr-sm-2" type="search" placeholder="Claim ID" aria-label="Search">
                            <input id='sbs-del-pid' class="form-control mr-sm-2" type="search" placeholder="Perspective ID" aria-label="Search">
                            <button id='sbs-delete' class="btn btn-outline-danger my-2 my-sm-0" type="submit">Delete</button>
                        </div>
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                       data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Merge perspective pair
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <div class="form-inline my-2 my-lg-0">
                            <input id='sbs-merge-cid1' class="form-control mr-sm-2" type="search" placeholder="Claim ID 1" aria-label="Search">
                            <input id='sbs-merge-pid1' class="form-control mr-sm-2" type="search" placeholder="Perspective ID 1" aria-label="Search">
                            <input id='sbs-merge-cid2' class="form-control mr-sm-2" type="search" placeholder="Claim ID 2" aria-label="Search">
                            <input id='sbs-merge-pid2' class="form-control mr-sm-2" type="search" placeholder="Perspective ID 2" aria-label="Search">
                            <button id='sbs-merge' class="btn btn-outline-danger my-2 my-sm-0" type="submit">Merge</button>
                        </div>
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                       data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Save
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <div class="form-inline my-2 my-lg-0">
                            <input id='sbs-save-fname' class="form-control mr-sm-2" type="search" placeholder="File Name" aria-label="Search">
                            <button id='sbs-save' class="btn btn-outline-danger my-2 my-sm-0" type="submit">Save</button>
                        </div>
                    </div>
                </li>

            </ul>
            <div class="form-inline my-2 my-lg-0">
                <input id='sbs-cid1' class="form-control mr-sm-2" type="search" placeholder="Claim ID 1" aria-label="Search">
                <input id='sbs-cid2' class="form-control mr-sm-2" type="search" placeholder="Claim ID 2" aria-label="Search">
                <button id="sbs-redirect" class="btn btn-outline-success my-2 my-sm-0" type="submit">Lookup</button>
            </div>
        </div>
    </nav>
    <br>
    <div class="row">
        <div class="col">
            <h4 class="persp-claim-title pallete pallete-peter-river">
                {{ claim1 }}
            </h4>
        </div>
        <div class="col">
            <h4 class="persp-claim-title pallete pallete-peter-river">
                {{ claim2 }}
            </h4>
        </div>
    </div>
    <div class="row">
        <div class="col persps-container tile">
            <h6>
                Perspectives For
            </h6>
            {% for cluster in persp_sup1 %}
                <a class="persp-title btn btn-block btn-lg btn-default palette-turquoise">
                    {% for p in cluster %}
                        {{ p }} <br>
                    {% endfor %}
                </a>
            {% endfor %}
        </div>
        <div class="col persps-container tile">
            <h6>
                Perspectives Against
            </h6>
            {% for cluster in persp_und1 %}
                <a class="persp-title btn btn-block btn-lg btn-default palette-carrot">
                    {% for p in cluster %}
                        {{ p }} <br>
                    {% endfor %}
                </a>
            {% endfor %}
        </div>
        <div class="col persps-container tile">
            <h6>
                Perspectives For
            </h6>
            {% for cluster in persp_sup2 %}
                <a class="persp-title btn btn-block btn-lg btn-default palette-turquoise">
                    {% for p in cluster %}
                        {{ p }} <br>
                    {% endfor %}
                </a>
            {% endfor %}
        </div>
        <div class="col persps-container tile">
            <h6>
                Perspectives Against
            </h6>
            {% for cluster in persp_und2 %}
                <a class="persp-title btn btn-block btn-lg btn-default palette-carrot">
                    {% for p in cluster %}
                        {{ p }} <br>
                    {% endfor %}
                </a>
            {% endfor %}
        </div>
    </div>
</div>

</body>
<script type="application/javascript">
    $('#sbs-redirect').click(function() {
        let cid1 = $('#sbs-cid1').val();
        let cid2 = $('#sbs-cid2').val();
        let url = '/dataset/side_by_side/' + cid1 + '/' + cid2;
        console.log(url);
        $.get(url, function (){
            window.location.href = url;
        });
    });

    $('#sbs-delete').click(function() {
        console.log("Delete!");
        let cid = $('#sbs-del-cid').val();
        let pid = $('#sbs-del-pid').val();
        let url = '/dataset/side_by_side/delete_cluster/' + cid + '/' + pid;
        $.get(url, function (){
            window.location.href = window.location.href;
        });
    });

    $('#sbs-add').click(function() {
        let cid_from = $('#sbs-add-cid-from').val();
        let cid_to = $('#sbs-add-cid-to').val();
        let pid = $('#sbs-add-pid').val();
        let flip = $('#sbs-add-flip-stance').prop('checked') ? 1 : 0;
        let url = '/dataset/side_by_side/add/' + cid_from + '/' + pid + '/' + cid_to + '/' + flip;
        console.log(url);
        $.get(url, function (){
            window.location.href = window.location.href;
        });
    });

    $('#sbs-merge').click(function() {
        console.log("Merge!");
        let cid1= $('#sbs-merge-cid1').val();
        let cid2 = $('#sbs-merge-cid2').val();
        let pid1 = $('#sbs-merge-pid1').val();
        let pid2 = $('#sbs-merge-pid2').val();
        let url = '/dataset/side_by_side/merge/' + cid1 + '/' + pid1 + '/' + cid2 + '/' + pid2;

        $.get(url, function (){
            window.location.href = window.location.href;
        });
    });

    $('#sbs-save').click(function() {
        let fname = $('#sbs-save-fname').val();
        console.log("Save to " + fname);
        let url = '/dataset/side_by_side/save/' + fname;
        $.get(url, function (){
            alert("Save success!");
        });
    })

</script>
</html>